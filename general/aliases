#
# Principais Alias de ações
#

#if [ -x /usr/local/bin/code-insiders ] ; then
#    alias code="/usr/local/bin/code-insiders"
#fi

alias zshconfig="vi ~/.zshrc"
alias ohmyzsh="vi ~/.oh-my-zsh"

# Usando code como editor
alias zedit="cd ~/.zshcustoms/ ; code ."
alias zlocal="code ~/.zshlocal"

# Comandos gerais
alias zupdate="sh ~/.zshcustoms/install.sh"

# Atalhos para o SSH
alias ssh="ssh -oStrictHostKeyChecking=no"
alias scp="scp -oStrictHostKeyChecking=no"
alias sftp="sftp -oStrictHostKeyChecking=no"

# Alias gerais
export LESS='-R'
alias x="exit"
alias l="ls -la"
alias ll="ls -la"

# Alias do Swarm
alias dls="docker service ls"
alias dlogs="docker service logs -f --tail 20"
alias dupdate="docker service update"

function dsps {
    watch -n 1 "docker stack ps $1"
}

function ddeploy {
    if [ ! -f docker-compose.yml ] ; then
        echo O diretório atual não contém um projeto do swarm.
        echo Esta faltando o arquivo: docker-compose.yml
        echo
        exit 1        
    fi
    PROJETO=${PWD##*/}
    echo Projeto: $PROJETO
    docker stack deploy --with-registry-auth -c docker-compose.yml $PROJETO
    watch -n 1 docker stack ps $PROJETO
}

function drm {
    if [ ! -f docker-compose.yml ] ; then
        echo O diretório atual não contém um projeto do swarm.
        echo Esta faltando o arquivo: docker-compose.yml
        echo
        exit 1
    fi
    PROJETO=${PWD##*/}
    echo Projeto: $PROJETO
    docker stack ps $PROJETO
    watch -n 1 docker stack rm $PROJETO
}
